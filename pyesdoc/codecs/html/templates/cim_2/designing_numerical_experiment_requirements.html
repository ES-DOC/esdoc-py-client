{% set REQUIREMENT_TYPES = [
	(pyesdoc.ontologies.cim.v2.TemporalConstraint, "Temporal Constraints"),
	(pyesdoc.ontologies.cim.v2.EnsembleRequirement, "Ensemble Requirements"),
	(pyesdoc.ontologies.cim.v2.ForcingConstraint, "Forcing Constraints"),
] %}

{% for typeof, description in REQUIREMENT_TYPES %}
	{% set requirements = [r for r in doc.requirements if isinstance(r, typeof)] %}
	{% set requirements = sorted(requirements, key=lambda r: r.name.lower() if r.name else str()) %}
	{% if requirements %}
	<section>
		<header>
			<h{{ header }}>{{ description }}</h{{ header }}>
		</header>
		{% for requirement in requirements %}
		{% set ctx = TemplateInfo(requirement, fieldset=str(typeof)) %}
		<section>
			<header>
				<h{{ header + 1 }}>{{ requirement.long_name }}</h{{ header + 1 }}>
			</header>
			<table>
				<tbody>
				{% include ../core/fieldset.html %}
				</tbody>
			</table>
		</section>
		{% end %}
	</section>
	{% end %}
{% end %}
