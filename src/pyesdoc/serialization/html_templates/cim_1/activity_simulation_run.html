{% extends "../core/document.html" %}

{% comment ******************* %}
{% comment Emit navigation     %}
{% comment ******************* %}
{% block doc-nav %}
<nav>
    <ul>
	    <li><a href="#{{ doc.ext.full_id }}-details">Details</a></li>
		{% if doc.inputs %}
		    <li><a href="#{{ doc.ext.full_id }}-inputs">Couplings</a></li>
	    {% end %}
		{% if doc.model_reference and doc.model_reference.changes %}
		    <li><a href="#{{ doc.ext.full_id }}-model-mods">Model Modifications {{len(doc.model_reference.changes)}}</a></li>
		{% end %}
    </ul>
</nav>
{% end %}

{% comment ***************** %}
{% comment Emit content      %}
{% comment ***************** %}
{% block doc-content %}

	{% comment ***************** %}
	{% comment Emit details      %}
	{% comment ***************** %}
	{% include activity_simulation_run_details.html %}

	{% comment ***************** %}
	{% comment Emit inputs   %}
	{% comment ***************** %}
	{% if doc.inputs %}
		{% include activity_simulation_run_inputs.html %}
	{% end %}

	{% comment ***************** %}
	{% comment Emit model mods   %}
	{% comment ***************** %}
	<h1>Model mods: {{ len(doc.model_reference.changes) }}</h1>
	{% if doc.model_reference and len(doc.model_reference.changes) %}
		{% set changeset = [c for c in doc.model_reference.changes if len(c.details)] %}
		{% if len(changeset) %}


		{% set ctx = TemplateInfo(doc,
			fieldset_type = "property",
			header = "Model Modifications",
			tag_id = doc.ext.full_id + "-model-mods",
			template = "fieldset_table.html"
		) %}
		{% for change_property in changeset %}
			{% raw ctx.fieldset.append(FieldInfo(change_property.name, value=change_property.details[0].description)) or "" %}
		{% end %}
		{% include ../core/section_01.html %}

		{% end %}
	{% end %}

{% end %}