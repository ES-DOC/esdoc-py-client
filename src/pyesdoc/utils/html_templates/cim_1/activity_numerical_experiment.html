{% extends "../core/document.html" %}

{% block doc-content %}

	{% comment ***************** %}
	{% comment Parse document    %}
	{% comment ***************** %}
	{% set doc.name = doc.experiment_id + ' ' + doc.short_name %}
	{% set doc.id = doc.experiment_id %}

	{% comment ***************** %}
	{% comment Emit overview     %}
	{% comment ***************** %}
	{% set ctx = ContextInfo(doc,
		header = DOCUMENT_OVERVIEW_HEADER,
		fieldset = DOCUMENT_OVERVIEW_FIELDSET + [
			FieldInfo('ID', 'name'),	
			FieldInfo('Rationale', 'rationales'),	
		],
		template = "fieldset_table.html"
	) %}
	{% include ../core/section.html %}	

	{% comment ***************** %}
	{% comment Emit requirements %}
	{% comment ***************** %}
	{% set REQUIREMENT_TYPES = {
		"initialCondition" : "Initial Conditions", 
		"boundaryCondition": "Boundary Conditions", 
		"lateralBoundaryCondition" : "Lateral Boundary Conditions", 
		"outputRequirement" : "Spatio Temporal Constraints", 
		"spatioTemporalConstraint" : "Output Requirements", 			
	} %}
	{% for type in REQUIREMENT_TYPES.keys() %}
		{% set requirements = filter(lambda r : r.requirement_type == type, doc.requirements) %}
		{% set ctx = ContextInfo(requirements,
			header = REQUIREMENT_TYPES[type],
			template = "cim_1_activity_numerical_requirement.html"
		) %}
		{% include ../core/section.html %}	
	{% end %}

{% end %}